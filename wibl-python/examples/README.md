# Example Configuration Files

The configuration files here are used for setting up the local environment for WIBL, required for some of the sub-commands on the main `wibl` executable.  Different configurations are sometimes required, although for most installations the same configuration should be used continuiously.  The directory also contains some examples of ship metadata JSON files. These can be used to programme WIBL loggers, so that they send that metadata into each file, to be picked up by the post-processing code; they can also be used to inject metadata into WIBL files (with the `wibl editwibl` sub-command) for data converted from other loggers into WIBL format.

## Installation Configuration

The installation configuration JSONs (`configure-submission.json` and `configure-submission-test.json`) are examples of files generated by `../scripts/desktop/configure-desktop.sh`.  This script uses `../scripts/desktop/configuration-parameters.sh` to set up the parameters for the local installation.  The example files can, however, be edited directly if required.

The `configure-submission.json` is set up to send data to DCDB's archive end-point, `configure-submission-test.json` is used for sending to the test end-point (i.e., the same API protocols, but the data isn't added to the archive by default).

## Ship Metadata

Whether embedded in a WIBL logger or added in post-processing, the ship metadata JSON file describes the components of the GeoJSON metadata in each converted WIBL file that needs to be modified for the file, or for the trusted node information.  The content of the metadata is specified in the IHO's Guidance on Crowdsourced Bathymetry (IHO Document B.12), although there is no corresponding encoding guide.  A *de facto* encoding is provided by the [CSBschema project](https://github.com/CCOMJHC/csbschema), which is also available through the WIBL project and the `wibl validate` command.  The format and encoding of the examples follow the `CSBSchema` model.

### Simplest Possible Metadata

The `ship-metadata-simple.json` provides the simplest possible metadata that would be expected in the file (the post-processing code will fill in the remainder).  The fields are:

1. providerOrganizationName.  A free-form description of your organization, e.g., "CCOM/JHC, UNH".  This will be set by default to "CCOM/JHC, UNH" by the post-processing code, unless modified; this is the mechanism to reset this as appropriate for any given implementation.
2. providerEmail.  A correctly formed e-mail address for questions, e.g., "wibl@ccom.unh.edu".  This will be set by default to "wibl@ccom.unh.edu" by the post-processing code, unless modified; this is the mechanism to reset this as appropriate for any given implementation.
3. uniqueVesselID.  Your DCDB identifier, and then a unique identifier for the ship hosting the logger.  This needs to be consistent throughout the whole of the life of the logger on the ship.  The identifier can be anything that's unique for your Trusted Node, but a UUID is most likely, e.g., "UNHJHC-0c2c3f58-24a4-448f-a538-ccca22993ed7".
4. providerLogger.  A description of the logger being used, e.g., "WIBL", which is also the default unless over-ridden here.
5. providerLoggerVersion.  A version identifier for the logger, e.g., "1.3.0/1.0.0/1.0.0", which is also the default unless over-ridden here.
6. length.  Length of the ship overall, e.g., 10.
7. IDType.  A description of the identifier used for the ship.  This is optional, and some ships may prefer to keep this anonymous.  Options are "MMSI" (for an AIS identifier number) or "IMO" (for an IMO registration number).
8. IDNumber.  The identifier described by IDType.  For MMSI this is a simple number; for IMO this is a string starting "IMO" followed by seven digits.
9. soundSpeedDocumented, positionOffsetDocumented, dataProcessed.  Flags for indicating whether the data has had various corrections done and documented.  Since this is unlikely in limited-metadata sources, setting these to "false" explicitly is safest.

### Full Metadata

The `ship-metadata-full.json` example provides a template for fuller metadata.  The more metadata that can be provided, the better.  In addition to the parameters described in the simple example, the full metadata can include:
1. verticalReferenceOfDepth.  This specifies the reference plane to which the depths are being reported.  Typically, this is "Transducer" (i.e., depth below the echosounder), but can be "Waterline" if draft has been added, and potentially other values.
2. verticalPositionReferencePoint.  This specifies the reference to which positioning information (e.g., for sensors) is reported.  Typically, this will be the GNSS antenna mounting point on the ship ("GNSS") but can also be the transducer ("Transducer") or a reference plate ("ReferencePlate") for larger ships.
3. sensors.  This allows the file to document the type(s) of sensor(s) being used in the system.  The inner group ("type", "make", etc.) can be copied for each sensor being described.  The "type" describes the system (e.g., "GNSS", "Sounder", "IMU"), and "make" and "model" the manufacturer and model of equipment.  The "position" vector provides a three-dimensional offset for the instrument relative to the reference point specified previously.  The coordinate frame is positive towards the bow, starboard, and down (in that order).
4. For "Sounder" sensor elements, the "draft" and "draftUncertainty" (95% CI estimate) are given in meters, and "frequency" is in Hertz.  These components are not used for other sensors.
5. contributorComments.  One or more comments can be provided to describe the data file, or events within the file.  These are arbitrary text.
6. processing.  This list of zero or more copies of the template provided can be used to specify any processing that has been done to the data before it was converted into GeoJSON.  The parameters allowed here are still evolving, but a particular example is "type" of "SoundSpeed", with free-text descriptions of the "method" used to correct for sound speed (e.g., "raytrace", "geometric"), "source" of information (e.g., "measuredSoundSpeedProfile", "soundSpeedSensor"), and the "algorithm" used (e.g., "Kongsberg SIS").
