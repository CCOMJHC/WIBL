{% extends "base_nav.html" %}

{% load static %}

{% block content %}
    <script src="https://cdn.plot.ly/plotly-3.0.1.min.js" charset="utf-8"></script>
    <script type="module" src="{% static 'frontend/js/Dashboard.js' %}"></script>
    <script src="{% static 'frontend/js/SocketManager.js' %}"></script>

    <section class="container is-fluid" style="height: 100vh; overflow: hidden;">
        <wibl-dashboard id="wibl-dashboard"
                       url="{{ wsURL }}"
                       stylesheet="{% static 'css/bulma-no-dark-mode.min.css' %}">
        </wibl-dashboard>
    </section>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const dashSockURL = "{{ wsURL }}" + "dashboard/statistics";
            const dashSock = SocketManager.getInstance(dashSockURL, "dashboard");

            dashSock.sendRequest("list-dashboard-statistics");
        });
    </script>
{% endblock %}